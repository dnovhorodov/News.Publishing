# News.Publishing

## ğŸŒŸ Overview
The **News.Publishing.Api** is a backend for managing the publishing flow of articles and videos. This service coordinates the creation, linking, and publication of content.

![flow](docs/publishing.png)

## ğŸ“‚ Repository Structure
Below is the structure of the repository to give you an understanding of how this service is organized:

- ğŸ“‚ `src/`
    - ğŸ“‚ `News.Publishing/`
        - ğŸ“ **Features**: Implementation of key features such as `CreatePublication`, `IngestVideo`, `LinkArticle`, etc.
        - ğŸ“œ **`IntegrationEvents.cs`**: Defines all integration events used to communicate with other services.
    - ğŸ“‚ `News.Publishing.Api/`
        - ğŸ“ **Requests**: Contains request handlers and API endpoints, defined using ASP.NET Core.
        - ğŸ“ **Infrastructure**: Handles dependencies such as configurations, middleware, and logging.
        - ğŸ“ **Internal**: Auto-generated by Marten. Do not modify!
        - ğŸ“ **Requests**: Sample request for playing locally
- ğŸ“‚ `test/`
    - **Acceptance and Integration Tests**: Implements tests for key features using **FluentAssertions**, **Ogooreck**, and **Bogus** for generating realistic test data.

## ğŸ’» Technologies Used
- ğŸ› ï¸ **.NET 8**
- ğŸ“¡ **[MassTransit](https://masstransit.io/)**: Provides RabbitMQ integration for the event-driven communication between services.
- ğŸ“¦ **[Marten](https://github.com/JasperFx/marten)**: Used for event sourcing and data persistence.
- ğŸ³ **Docker & Docker Compose**: Used for containerizing the service and running it in different environments.

## ğŸš€ Getting Started
### ğŸ”§ Prerequisites

- ğŸ› ï¸ .NET SDK 8.0+ (Available [here](https://dotnet.microsoft.com/download))
- ğŸ³ PostgreSQL 12+ (Available [here](https://www.postgresql.org/download/)) 
- ğŸ³ Docker (Available [here](https://docs.docker.com/engine/install/))
- ğŸ° RabbitMQ (Available [here](https://www.rabbitmq.com/docs/download))

The fastest possible way to develop with is to run PostgreSQL and RabbitMQ in a Docker container. Assuming that you have Docker running on your local box, type:
`docker compose up -d postgres rabbitmq`

### â–¶ï¸ Running the Service
1. **Clone the repository**:
    ```shell
    git clone https://github.com/dnovhorodov/News.Publishing.git
    cd News.Publishing
    ```

2. **Run dependencies**:
    ```shell
    docker compose up -d postgres rabbitmq
    ```

3. **Run service**:
    ```shell
    dotnet run --project ./src/News.Publishing.Api/News.Publishing.Api.csproj
    ```
4. **API Documentation**: Swagger is enabled for API documentation.
   Once the service is running, navigate to `http://localhost:5267/swagger/index.html` to explore the endpoints.

### ğŸ§ª Testing
The service includes acceptance and integration tests to validate its functionality.

- ğŸ§· [FluentAssertions](https://github.com/fluentassertions/fluentassertions): For expressive assertions in unit tests.
- ğŸ“ [Ogooreck](https://github.com/oskardudycz/Ogooreck): For BDD-style testing and scenario definitions.
- ğŸ² [Bogus](https://github.com/bchavez/Bogus): For generating fake data to test various edge cases.